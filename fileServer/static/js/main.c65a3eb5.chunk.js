(this["webpackJsonpfile-control"]=this["webpackJsonpfile-control"]||[]).push([[0],{167:function(e,t,a){e.exports=a.p+"static/media/logo.5d5d9eef.svg"},176:function(e,t,a){e.exports=a(356)},181:function(e,t,a){},354:function(e,t,a){},355:function(e,t,a){},356:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),l=a(3),r=a.n(l),o=(a(181),a(63)),i=a(88),u=(a(66),a(20)),s=a(167),m=a.n(s),f=function(){var e=u.a.Header;return c.a.createElement(e,{className:"header"},c.a.createElement("div",{className:"logo"},c.a.createElement("a",{href:""},c.a.createElement("img",{alt:"",src:m.a,width:"50",height:"50"}))))},p=(a(128),a(7)),d=(a(230),a(65)),h=a(18),v=a(42),E=a(22),b=a(130),g=Object(E.a)(),y=[Object(b.a)(g)];function k(e){var t;return Object(v.e)((t=g,Object(v.c)({router:Object(i.b)(t)})),e,Object(v.d)(v.a.apply(void 0,y)))}var O=function(e){var t=Object(n.useState)(null),a=Object(h.a)(t,2),l=a[0],r=a[1],o=u.a.Sider,i=d.b.SubMenu,s=e.defaultSelected,m=e.defaultOpened,f=e.mainMenuData;return c.a.createElement(o,{width:null===l?"20vw":"40vw",style:{height:"calc(100vh - 64px)",left:0,background:"#fff"},breakpoint:"lg",collapsible:!0,onBreakpoint:function(e){r(e?"1":null)},collapsedWidth:0,trigger:l},c.a.createElement(d.b,{mode:"inline",defaultSelectedKeys:s,defaultOpenKeys:m,style:{height:"100%",borderRight:0},onClick:function(e){g.push({pathname:e.key})},theme:"dark"},f.map((function(e){return function(e){if(void 0===e.item&&e.url)return c.a.createElement(d.b.Item,{key:e.key},c.a.createElement(p.a,{type:e.iconType}),c.a.createElement("span",null,e.title));var t=e;return c.a.createElement(i,{key:e.key,title:c.a.createElement("span",null,c.a.createElement(p.a,{type:e.iconType}),e.title)},t.item.map((function(e){return c.a.createElement(d.b.Item,{key:e.key},e.title)})))}(e)}))))};O.defaultProps={defaultSelected:["/"],defaultOpened:["demoRoom"],mainMenuData:[{iconType:"video-camera",title:"fileUpload",key:"/",url:"/"}]};var j=O,w=a(90),x=(a(164),a(86)),S=(a(165),a(85)),N=(a(133),a(64)),T=a(36),C=a.n(T),F=a(62),D=a(43),L=a.n(D),P="http://123.207.87.254:3999",B={uploadFile:"".concat(P,"/uploadFile"),fileList:function(e){return"".concat(P,"/fileList/").concat(e)},fileDirs:"".concat(P,"/imageDirs"),deleteFile:"".concat(P,"/delete")},I=function(){var e=Object(n.useState)(!1),t=Object(h.a)(e,2),a=(t[0],t[1]),l=Object(n.useState)(""),r=Object(h.a)(l,2),o=r[0],i=r[1],u=Object(n.useState)(!1),s=Object(h.a)(u,2),m=s[0],f=s[1],d=Object(n.useState)([]),v=Object(h.a)(d,2),E=v[0],b=v[1],y=L.a.CancelToken.source();Object(n.useEffect)((function(){return function(){var e=Object(F.a)(C.a.mark((function e(){var t;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.a.get(B.fileDirs,{cancelToken:y.token});case 2:t=e.sent,b(t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()(),function(){y.cancel("cancel api call")}}),[m]);var k=c.a.createElement("div",null,c.a.createElement(p.a,{type:"plus"}),c.a.createElement("div",{className:"ant-upload-text"},"Upload"));return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"file-container"},E.map((function(e,t){return c.a.createElement("div",{className:"col-img",key:t.toString(),onClick:function(){!function(e){g.push("/list",{packageName:e})}(e)}},c.a.createElement(p.a,{type:"folder-open",theme:"filled",className:"file-icon"}),c.a.createElement("span",null,e))}))),c.a.createElement("div",{className:"file-upload-container"},c.a.createElement("div",null,c.a.createElement(S.a,{name:"img",action:B.uploadFile,listType:"picture-card",onChange:function(e){"uploading"!==e.file.status?"done"===e.file.status&&(a(!1),i(P+e.file.response.path),f(!0)):a(!0)},beforeUpload:function(e){var t="image/jpeg"===e.type||"image/png"===e.type;t||N.a.error("You can only upload JPG/PNG file!");var a=e.size/1024/1024<2;return a||N.a.error("Image must smaller than 2MB!"),t&&a},showUploadList:!1},k)),c.a.createElement(x.a,{visible:m,footer:null,onCancel:function(){f(!1)}},c.a.createElement("img",{alt:"example",style:{width:"100%"},src:o}))))},M=(a(354),function(e){var t=Object(n.useState)([]),a=Object(h.a)(t,2),l=a[0],r=a[1],o=Object(n.useState)(!1),i=Object(h.a)(o,2),u=i[0],s=i[1],m=L.a.CancelToken.source(),f=Object(n.useState)(""),p=Object(h.a)(f,2),d=p[0],v=p[1],E=function(){var t=Object(F.a)(C.a.mark((function t(){var a,n,c;return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.location.state.packageName,t.next=3,L.a.get(B.fileList(a),{cancelToken:m.token});case 3:n=t.sent,c=n.data.map((function(e,t){return{uid:t,name:e,url:P+"/"+e,status:"done"}})),r(c);case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();Object(n.useEffect)((function(){return E(),function(){m.cancel("cancel api call")}}),[]);var b=function(){var e=Object(F.a)(C.a.mark((function e(t){var a;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.next=3,L.a.post(B.deleteFile,{filePath:t.name},{headers:{"Content-Type":"application/json"}});case 3:a=e.sent,console.log(a.data),1===a.data.status&&(E(),N.a.success("\u5220\u9664\u6210\u529f"));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return c.a.createElement("div",null,c.a.createElement(S.a,{listType:"picture-card",action:B.uploadFile,fileList:l,onPreview:function(e){v(e.url),s(!0)},className:"img-list-card",onRemove:b}),c.a.createElement(x.a,{visible:u,footer:null,onCancel:function(){s(!1)}},c.a.createElement("img",{alt:"example",style:{width:"100%"},src:d})))}),U=function(){var e=u.a.Content;return c.a.createElement(u.a,{style:{padding:"24px"}},c.a.createElement(e,{style:{background:"#fff",padding:24,minHeight:280,height:"calc(100vh - 112px)",overflow:"auto"}},c.a.createElement(w.c,null,c.a.createElement(w.a,{path:"/",exact:!0,component:I}),c.a.createElement(w.a,{path:"/list",component:M}))))},J=function(){return Object(n.useEffect)((function(){g.push("/")})),c.a.createElement(u.a,null,c.a.createElement(f,null),c.a.createElement(u.a,null,c.a.createElement(j,null),c.a.createElement(U,null)))};a(355);var R=function(){return c.a.createElement(o.a,{store:k(void 0)},c.a.createElement(i.a,{history:g},c.a.createElement(J,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(c.a.createElement(R,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[176,1,2]]]);
//# sourceMappingURL=main.c65a3eb5.chunk.js.map